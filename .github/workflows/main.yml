on:
  push:
    branches:
      - master
name: ðŸš€ Deploy backend on push
jobs:
  backend-deploy:
    name: ðŸŽ‰ Deploy Backend
    runs-on: ubuntu-latest
    steps:
    - name: ðŸšš Get latest backend code
      uses: actions/checkout@v2.3.2
      with:
        path: /  # Specify the directory where backend code is located
        fetch-depth: 0
        submodules: 'recursive'
        ref: main
        # Ignore the public directory
        # Add other directories or files you want to ignore if needed
        ignore: 'backend/public/**/*'
    
    - name: ðŸ“‚ Sync files
      uses: SamKirkland/FTP-Deploy-Action@4.0.0
      with:
        server: ftpupload.net
        username: if0_36496460
        password: 8W2WZI9rbQ
        local-dir: backend/
        server-dir: /laravelbrickol.kesug.com/htdocs/

    # - name: ðŸ“‚ Sync public directory to root
    #   uses: SamKirkland/FTP-Deploy-Action@4.0.0
    #    with:
    #     server: ftpupload.net
    #     username: if0_36496460
    #     password: 8W2WZI9rbQ
    #     local-dir: backend/public/
    #     server-dir: /laravelbrickol.kesug.com/htdocs/
